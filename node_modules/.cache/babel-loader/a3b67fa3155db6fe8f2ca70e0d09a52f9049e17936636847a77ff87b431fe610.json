{"ast":null,"code":"import _slicedToArray from\"C:/Users/roie0/react-food/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _toConsumableArray from\"C:/Users/roie0/react-food/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"C:/Users/roie0/react-food/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useReducer}from\"react\";import CartContext from\"./cart-context\";import{jsx as _jsx}from\"react/jsx-runtime\";var defaultCartState={items:[],totalAmount:0};var cartReducer=function cartReducer(state,action){if(action.type==='ADD'){var updatedTotalAmount=state.totalAmount+action.item.price*action.item.amount;var existingCartItemIndex=state.items.findIndex(function(item){return item.id===action.item.id;});var exsitingCartItem=state.items[existingCartItemIndex];var updatedItems;if(exsitingCartItem){var updatedItem=_objectSpread(_objectSpread({},exsitingCartItem),{},{amount:exsitingCartItem.amount+action.item.amount});updatedItems=_toConsumableArray(state.items);updatedItems[existingCartItemIndex]=updatedItem;}else{updatedItems=state.items.concat(action.item);}return{items:updatedItems,totalAmount:updatedTotalAmount};}if(action.type==='REMOVE'){var _existingCartItemIndex=state.items.findIndex(function(item){return item.id===action.id;});var _exsitingCartItem=state.items[_existingCartItemIndex];var _updatedTotalAmount=state.totalAmount-_exsitingCartItem.price;var _updatedItems;if(_exsitingCartItem.amount===1){_updatedItems=state.items.filter(function(item){return item.id!==action.id;});}else{var _updatedItem=_objectSpread(_objectSpread({},_exsitingCartItem),{},{amount:_exsitingCartItem.amount-1});_updatedItems=_toConsumableArray(state.items);_updatedItems[_existingCartItemIndex]=_updatedItem;}return{items:_updatedItems,totalAmount:_updatedTotalAmount};}if(action.type==='CLEAR'){return defaultCartState;}return defaultCartState;};var CartProvider=function CartProvider(props){var _useReducer=useReducer(cartReducer,defaultCartState),_useReducer2=_slicedToArray(_useReducer,2),cartState=_useReducer2[0],dispatchCartAction=_useReducer2[1];var addItemToCartHandler=function addItemToCartHandler(item){dispatchCartAction({type:'ADD',item:item});};var removeItemFromCartHandler=function removeItemFromCartHandler(id){dispatchCartAction({type:'REMOVE',id:id});};var clearCartHandler=function clearCartHandler(){dispatchCartAction({type:'CLEAR'});};var cartContext={items:cartState.items,totalAmount:cartState.totalAmount,addItem:addItemToCartHandler,removeItem:removeItemFromCartHandler,clearCart:clearCartHandler};return/*#__PURE__*/_jsx(CartContext.Provider,{value:cartContext,children:props.children});};export default CartProvider;","map":{"version":3,"names":["React","useReducer","CartContext","defaultCartState","items","totalAmount","cartReducer","state","action","type","updatedTotalAmount","item","price","amount","existingCartItemIndex","findIndex","id","exsitingCartItem","updatedItems","updatedItem","concat","filter","CartProvider","props","cartState","dispatchCartAction","addItemToCartHandler","removeItemFromCartHandler","clearCartHandler","cartContext","addItem","removeItem","clearCart","children"],"sources":["C:/Users/roie0/react-food/src/store/CartProvider.js"],"sourcesContent":["import React, { useReducer } from \"react\";\r\nimport CartContext from \"./cart-context\";\r\n\r\nconst defaultCartState={\r\n    items: [],\r\n    totalAmount:0\r\n};\r\n\r\nconst cartReducer=(state,action)=>{\r\n    if(action.type==='ADD'){\r\n        const updatedTotalAmount=state.totalAmount+action.item.price * action.item.amount;\r\n\r\nconst existingCartItemIndex=state.items.findIndex(item=> item.id===action.item.id);\r\n     const exsitingCartItem=state.items[existingCartItemIndex];\r\n     \r\n     let updatedItems;\r\n\r\n     if(exsitingCartItem){\r\n         const updatedItem={\r\n           ...exsitingCartItem  ,\r\n           amount:exsitingCartItem.amount+action.item.amount\r\n\r\n         };\r\n         updatedItems=[...state.items];\r\n         updatedItems[existingCartItemIndex]=updatedItem\r\n     }else{\r\n    \r\n         updatedItems=state.items.concat(action.item);\r\n     }\r\n\r\n\r\n        return{\r\n            items:updatedItems,\r\n            totalAmount:updatedTotalAmount\r\n        }\r\n    }\r\n   \r\n    if(action.type==='REMOVE'){\r\n        \r\n        const existingCartItemIndex=state.items.findIndex(\r\n            item=>item.id===action.id);\r\n            const exsitingCartItem=state.items[existingCartItemIndex];\r\n            const updatedTotalAmount=state.totalAmount - exsitingCartItem.price\r\n       let updatedItems;\r\n       if(exsitingCartItem.amount===1){\r\n   updatedItems=state.items.filter(item=>item.id!==action.id)\r\n       }else{\r\nconst updatedItem={...exsitingCartItem,amount:exsitingCartItem.amount-1};\r\nupdatedItems=[...state.items];\r\nupdatedItems[existingCartItemIndex]=updatedItem;\r\n       }\r\n       return{\r\n           items:updatedItems,\r\n           totalAmount:updatedTotalAmount\r\n       }\r\n        }\r\n\r\nif(action.type==='CLEAR'){\r\n    return defaultCartState\r\n}\r\n\r\n    return defaultCartState;\r\n}\r\n\r\nconst CartProvider=(props)=>{\r\nconst [cartState,dispatchCartAction]=useReducer(cartReducer,defaultCartState);\r\n\r\nconst addItemToCartHandler=(item)=>{\r\ndispatchCartAction({type:'ADD',item:item});\r\n};\r\n\r\nconst removeItemFromCartHandler=(id)=>{\r\n    dispatchCartAction({type:'REMOVE',id:id});\r\n};\r\n\r\nconst clearCartHandler=()=>{\r\n    dispatchCartAction({type:'CLEAR'});\r\n};\r\n\r\nconst cartContext={\r\n    items:cartState.items,\r\n    totalAmount:cartState.totalAmount,\r\n    addItem:addItemToCartHandler,\r\n    removeItem:removeItemFromCartHandler,\r\nclearCart:clearCartHandler\r\n};\r\n\r\nreturn <CartContext.Provider value={cartContext}>\r\n    {props.children}\r\n</CartContext.Provider>\r\n};\r\nexport default CartProvider;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}