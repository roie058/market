{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/roie0/react-food/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/roie0/react-food/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:/Users/roie0/react-food/node_modules/@babel/runtime/regenerator/index.js\";import React,{useEffect,useState}from\"react\";import styles from\"./AvailableMeals.module.css\";import MealItem from\"./MealItem\";import{useParams}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";var AvailableMeals=function AvailableMeals(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),meals=_useState2[0],setMeals=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setIsLoading=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),httpError=_useState6[0],setHttpError=_useState6[1];var _useParams=useParams(),department=_useParams.department;useEffect(function(){var fetchMeals=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,responseData,loadedMeals,key;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"https://react-food-645a1-default-rtdb.europe-west1.firebasedatabase.app/meals.json\");case 2:response=_context.sent;if(response.ok){_context.next=5;break;}throw new Error(\"Somthing went wrong!\");case 5:_context.next=7;return response.json();case 7:responseData=_context.sent;loadedMeals=[];for(key in responseData){if(responseData[key].sale){loadedMeals.push({id:key,name:responseData[key].name,image:responseData[key].image,price:responseData[key].price,type:responseData[key].type,sale:responseData[key].sale});}else{loadedMeals.push({id:key,name:responseData[key].name,image:responseData[key].image,price:responseData[key].price,type:responseData[key].type});}}setMeals(loadedMeals);setIsLoading(false);case 12:case\"end\":return _context.stop();}}},_callee);}));return function fetchMeals(){return _ref.apply(this,arguments);};}();fetchMeals().catch(function(error){setIsLoading(false);setHttpError(error.message);});},[]);if(isLoading){return/*#__PURE__*/_jsx(\"section\",{className:styles.MealsLoading,children:/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"})});}if(httpError){return/*#__PURE__*/_jsx(\"section\",{className:styles.MealsError,children:/*#__PURE__*/_jsx(\"p\",{children:httpError})});}var mealsList=meals.map(function(meal){if(department===meal.type){if(!!meal.sale){return/*#__PURE__*/_jsx(MealItem,{id:meal.id,name:meal.name,description:meal.description,price:meal.price,sale:meal.sale,image:meal.image},meal.id);}else{return/*#__PURE__*/_jsx(MealItem,{id:meal.id,name:meal.name,description:meal.description,price:meal.price,image:meal.image},meal.id);}}else if(department===\"sales\"&&meal.sale||!department&&meal.sale){return/*#__PURE__*/_jsx(MealItem,{id:meal.id,name:meal.name,description:meal.description,price:meal.price,sale:meal.sale,image:meal.image},meal.id);}});return/*#__PURE__*/_jsx(\"section\",{className:styles.meals,children:/*#__PURE__*/_jsx(\"ul\",{className:styles.card_layout,children:mealsList})});};export default AvailableMeals;","map":{"version":3,"names":["React","useEffect","useState","styles","MealItem","useParams","AvailableMeals","props","meals","setMeals","isLoading","setIsLoading","httpError","setHttpError","department","fetchMeals","fetch","response","ok","Error","json","responseData","loadedMeals","key","sale","push","id","name","image","price","type","catch","error","message","MealsLoading","MealsError","mealsList","map","meal","description","card_layout"],"sources":["C:/Users/roie0/react-food/src/components/Meals/AvailableMeals.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport styles from \"./AvailableMeals.module.css\";\r\nimport MealItem from \"./MealItem\";\r\nimport { useParams } from \"react-router-dom\";\r\nconst AvailableMeals = (props) => {\r\n  const [meals, setMeals] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [httpError, setHttpError] = useState();\r\n  const { department } = useParams();\r\n\r\n  useEffect(() => {\r\n    const fetchMeals = async () => {\r\n      const response = await fetch(\r\n        \"https://react-food-645a1-default-rtdb.europe-west1.firebasedatabase.app/meals.json\"\r\n      );\r\n\r\n      if (!response.ok) {\r\n        throw new Error(\"Somthing went wrong!\");\r\n      }\r\n\r\n      const responseData = await response.json();\r\n\r\n      const loadedMeals = [];\r\n\r\n      for (const key in responseData) {\r\n        if (responseData[key].sale) {\r\n          loadedMeals.push({\r\n            id: key,\r\n            name: responseData[key].name,\r\n            image: responseData[key].image,\r\n            price: responseData[key].price,\r\n            type: responseData[key].type,\r\n            sale: responseData[key].sale,\r\n          });\r\n        } else {\r\n          loadedMeals.push({\r\n            id: key,\r\n            name: responseData[key].name,\r\n            image: responseData[key].image,\r\n            price: responseData[key].price,\r\n            type: responseData[key].type,\r\n          });\r\n        }\r\n      }\r\n      setMeals(loadedMeals);\r\n      setIsLoading(false);\r\n    };\r\n\r\n    fetchMeals().catch((error) => {\r\n      setIsLoading(false);\r\n      setHttpError(error.message);\r\n    });\r\n  }, []);\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <section className={styles.MealsLoading}>\r\n        <p>Loading...</p>\r\n      </section>\r\n    );\r\n  }\r\n\r\n  if (httpError) {\r\n    return (\r\n      <section className={styles.MealsError}>\r\n        <p>{httpError}</p>\r\n      </section>\r\n    );\r\n  }\r\n\r\n  const mealsList = meals.map((meal) => {\r\n    if (department === meal.type) {\r\n      if (!!meal.sale) {\r\n        return (\r\n          <MealItem\r\n            id={meal.id}\r\n            key={meal.id}\r\n            name={meal.name}\r\n            description={meal.description}\r\n            price={meal.price}\r\n            sale={meal.sale}\r\n            image={meal.image}\r\n          />\r\n        );\r\n      } else {\r\n        return (\r\n          <MealItem\r\n            id={meal.id}\r\n            key={meal.id}\r\n            name={meal.name}\r\n            description={meal.description}\r\n            price={meal.price}\r\n            image={meal.image}\r\n          />\r\n        );\r\n      }\r\n    } else if (\r\n      (department === \"sales\" && meal.sale) ||\r\n      (!department && meal.sale)\r\n    ) {\r\n      return (\r\n        <MealItem\r\n          id={meal.id}\r\n          key={meal.id}\r\n          name={meal.name}\r\n          description={meal.description}\r\n          price={meal.price}\r\n          sale={meal.sale}\r\n          image={meal.image}\r\n        />\r\n      );\r\n    }\r\n  });\r\n\r\n  return (\r\n    <section className={styles.meals}>\r\n      <ul className={styles.card_layout}>{mealsList}</ul>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default AvailableMeals;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}