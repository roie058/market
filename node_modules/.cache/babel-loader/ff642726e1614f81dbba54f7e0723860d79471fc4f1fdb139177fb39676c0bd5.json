{"ast":null,"code":"import _slicedToArray from\"C:/Users/roie0/react-food/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useEffect,useState}from\"react\";import styles from\"./MealItem.module.css\";import MealItemForm from\"./MealItemForm\";import CartContext from\"../../store/cart-context\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MealItem=function MealItem(props){var _useState=useState(),_useState2=_slicedToArray(_useState,2),salePrice=_useState2[0],setSalePrice=_useState2[1];var cartCtx=useContext(CartContext);var price=\"$\".concat(props.price.toFixed(2));useEffect(function(){var saleCalculator=function saleCalculator(discount,price){if(typeof discount===\"number\"){var sale=price*(1-discount);setSalePrice(sale.toFixed(2));}else return;};saleCalculator(props.sale,props.price);},[props]);var addToCartHandler=function addToCartHandler(amount){if(props.sale){cartCtx.addItem({image:props.image,id:props.id,name:props.name,amount:amount,price:salePrice});}else{cartCtx.addItem({image:props.image,id:props.id,name:props.name,amount:amount,price:props.price});}};return/*#__PURE__*/_jsxs(\"li\",{className:\"\".concat(styles.product_card,\" \").concat(salePrice?styles.sale_align:\"\",\"  \"),children:[salePrice&&/*#__PURE__*/_jsx(\"div\",{\"data-content\":\"-\".concat(props.sale*100,\"%\"),className:styles.saleCard}),/*#__PURE__*/_jsx(\"img\",{className:styles.product_image,alt:props.name,src:\"\".concat(props.image)}),/*#__PURE__*/_jsxs(\"div\",{className:styles.card_text,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.card_head,children:[/*#__PURE__*/_jsx(\"h3\",{children:props.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(styles.price,\" \").concat(salePrice?styles.saleOn:\"\"),children:[price,\"/kg\"]}),salePrice&&/*#__PURE__*/_jsxs(\"span\",{className:styles.sale,children:[\"$\",salePrice,\"/kg\"]})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(MealItemForm,{onAddToCart:addToCartHandler,id:props.id,onAdd:props.onAdd})})]})]});};export default MealItem;","map":{"version":3,"names":["React","useContext","useEffect","useState","styles","MealItemForm","CartContext","MealItem","props","salePrice","setSalePrice","cartCtx","price","toFixed","saleCalculator","discount","sale","addToCartHandler","amount","addItem","image","id","name","product_card","sale_align","saleCard","product_image","card_text","card_head","saleOn","onAdd"],"sources":["C:/Users/roie0/react-food/src/components/Meals/MealItem.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\r\nimport styles from \"./MealItem.module.css\";\r\nimport MealItemForm from \"./MealItemForm\";\r\nimport CartContext from \"../../store/cart-context\";\r\n\r\nconst MealItem = (props) => {\r\n  const [salePrice, setSalePrice] = useState();\r\n  const cartCtx = useContext(CartContext);\r\n  const price = `$${props.price.toFixed(2)}`;\r\n\r\n  useEffect(() => {\r\n    const saleCalculator = (discount, price) => {\r\n      if (typeof discount === \"number\") {\r\n        const sale = price * (1 - discount);\r\n        setSalePrice(sale.toFixed(2));\r\n      } else return;\r\n    };\r\n\r\n    saleCalculator(props.sale, props.price);\r\n  }, [props]);\r\n\r\n  const addToCartHandler = (amount) => {\r\n    if (props.sale) {\r\n      cartCtx.addItem({\r\n        image: props.image,\r\n        id: props.id,\r\n        name: props.name,\r\n        amount: amount,\r\n        price: salePrice,\r\n      });\r\n    } else {\r\n      cartCtx.addItem({\r\n        image: props.image,\r\n        id: props.id,\r\n        name: props.name,\r\n        amount: amount,\r\n        price: props.price,\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <li\r\n      className={`${styles.product_card} ${\r\n        salePrice ? styles.sale_align : \"\"\r\n      }  `}\r\n    >\r\n      {salePrice && (\r\n        <div\r\n          data-content={`-${props.sale * 100}%`}\r\n          className={styles.saleCard}\r\n        ></div>\r\n      )}\r\n      <img\r\n        className={styles.product_image}\r\n        alt={props.name}\r\n        src={`${props.image}`}\r\n      ></img>\r\n      <div className={styles.card_text}>\r\n        <div className={styles.card_head}>\r\n          <h3>{props.name}</h3>\r\n          <div className={`${styles.price} ${salePrice ? styles.saleOn : \"\"}`}>\r\n            {price}/kg\r\n          </div>\r\n          {salePrice && <span className={styles.sale}>${salePrice}/kg</span>}\r\n        </div>\r\n        <div>\r\n          <MealItemForm\r\n            onAddToCart={addToCartHandler}\r\n            id={props.id}\r\n            onAdd={props.onAdd}\r\n          />\r\n        </div>\r\n      </div>\r\n    </li>\r\n  );\r\n};\r\nexport default MealItem;\r\n"],"mappings":"+GAAA,MAAOA,MAAK,EAAIC,UAAU,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC9D,MAAOC,OAAM,KAAM,uBAAuB,CAC1C,MAAOC,aAAY,KAAM,gBAAgB,CACzC,MAAOC,YAAW,KAAM,0BAA0B,CAAC,wFAEnD,GAAMC,SAAQ,CAAG,QAAXA,SAAQ,CAAIC,KAAK,CAAK,CAC1B,cAAkCL,QAAQ,EAAE,wCAArCM,SAAS,eAAEC,YAAY,eAC9B,GAAMC,QAAO,CAAGV,UAAU,CAACK,WAAW,CAAC,CACvC,GAAMM,MAAK,YAAOJ,KAAK,CAACI,KAAK,CAACC,OAAO,CAAC,CAAC,CAAC,CAAE,CAE1CX,SAAS,CAAC,UAAM,CACd,GAAMY,eAAc,CAAG,QAAjBA,eAAc,CAAIC,QAAQ,CAAEH,KAAK,CAAK,CAC1C,GAAI,MAAOG,SAAQ,GAAK,QAAQ,CAAE,CAChC,GAAMC,KAAI,CAAGJ,KAAK,EAAI,CAAC,CAAGG,QAAQ,CAAC,CACnCL,YAAY,CAACM,IAAI,CAACH,OAAO,CAAC,CAAC,CAAC,CAAC,CAC/B,CAAC,IAAM,QACT,CAAC,CAEDC,cAAc,CAACN,KAAK,CAACQ,IAAI,CAAER,KAAK,CAACI,KAAK,CAAC,CACzC,CAAC,CAAE,CAACJ,KAAK,CAAC,CAAC,CAEX,GAAMS,iBAAgB,CAAG,QAAnBA,iBAAgB,CAAIC,MAAM,CAAK,CACnC,GAAIV,KAAK,CAACQ,IAAI,CAAE,CACdL,OAAO,CAACQ,OAAO,CAAC,CACdC,KAAK,CAAEZ,KAAK,CAACY,KAAK,CAClBC,EAAE,CAAEb,KAAK,CAACa,EAAE,CACZC,IAAI,CAAEd,KAAK,CAACc,IAAI,CAChBJ,MAAM,CAAEA,MAAM,CACdN,KAAK,CAAEH,SACT,CAAC,CAAC,CACJ,CAAC,IAAM,CACLE,OAAO,CAACQ,OAAO,CAAC,CACdC,KAAK,CAAEZ,KAAK,CAACY,KAAK,CAClBC,EAAE,CAAEb,KAAK,CAACa,EAAE,CACZC,IAAI,CAAEd,KAAK,CAACc,IAAI,CAChBJ,MAAM,CAAEA,MAAM,CACdN,KAAK,CAAEJ,KAAK,CAACI,KACf,CAAC,CAAC,CACJ,CACF,CAAC,CAED,mBACE,YACE,SAAS,WAAKR,MAAM,CAACmB,YAAY,aAC/Bd,SAAS,CAAGL,MAAM,CAACoB,UAAU,CAAG,EAAE,MAC/B,WAEJf,SAAS,eACR,YACE,0BAAkBD,KAAK,CAACQ,IAAI,CAAG,GAAG,KAAI,CACtC,SAAS,CAAEZ,MAAM,CAACqB,QAAS,EAE9B,cACD,YACE,SAAS,CAAErB,MAAM,CAACsB,aAAc,CAChC,GAAG,CAAElB,KAAK,CAACc,IAAK,CAChB,GAAG,WAAKd,KAAK,CAACY,KAAK,CAAG,EACjB,cACP,aAAK,SAAS,CAAEhB,MAAM,CAACuB,SAAU,wBAC/B,aAAK,SAAS,CAAEvB,MAAM,CAACwB,SAAU,wBAC/B,oBAAKpB,KAAK,CAACc,IAAI,EAAM,cACrB,aAAK,SAAS,WAAKlB,MAAM,CAACQ,KAAK,aAAIH,SAAS,CAAGL,MAAM,CAACyB,MAAM,CAAG,EAAE,CAAG,WACjEjB,KAAK,SACF,CACLH,SAAS,eAAI,cAAM,SAAS,CAAEL,MAAM,CAACY,IAAK,eAAGP,SAAS,SAAW,GAC9D,cACN,kCACE,KAAC,YAAY,EACX,WAAW,CAAEQ,gBAAiB,CAC9B,EAAE,CAAET,KAAK,CAACa,EAAG,CACb,KAAK,CAAEb,KAAK,CAACsB,KAAM,EACnB,EACE,GACF,GACH,CAET,CAAC,CACD,cAAevB,SAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}